/* Copyright WYSIWYG Web Builder 2024 - https://www.wysiwygwebbuilder.com */
(function(c){function v(e){return 10>e?"0"+e:e}function p(e,a,b,g,k,d){var f=c("<a></a>").attr("href",a).attr("target",d.target).html(b);a=c('<div class="headline-title"></div>').append(f);"marquee"==d.mode&&(k=k.replace("<br>"," "));if(d.includeDate){g=new Date(g);if("calendar"==d.dateFormat){f.html("");f.addClass("headline");a=c('<div class="headline-calendar"><div class="headline-calendar-date"></div> <div class="headline-calendar-month"></div></div>');var l=c('<div class="headline-content"><div class="headline-title"></div><div class="headline-description"></div></div>');
c(".headline-calendar-date",a).text(g.getDate());c(".headline-calendar-month",a).text(g.toLocaleString(navigator.language,{month:"short"}));c(".headline-title",l).html(b);c(".headline-description",l).html(k);f.append(a);f.append(l);0!=d.animation&&1!=d.animation&&6!=d.animation&&7!=d.animation||"rotate"!=d.mode||f.css({opacity:0});0==d.sortOrder?f.appendTo(e):f.prependTo(e);return}if("twitter"==d.dateFormat)g=parseInt(((new Date).getTime()-g.getTime())/1E3),b=60>g?"less than a minute ago":120>g?"about a minute ago":
3600>g?parseInt(g/60).toString()+" minutes ago":7200>g?"about an hour ago":86400>g?"about "+parseInt(g/3600).toString()+" hours ago":172800>g?"1 day ago":parseInt(g/86400).toString()+" days ago";else{f="January February March April May June July August September October November December".split(" ");l="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" ");var h=g.getFullYear(),m=h.toString().substring(2),n=g.getMonth()+1,r=g.getDate(),t=g.getHours(),w=g.getMinutes(),u=g.getSeconds();
b=d.dateFormat;b=b.replace("hh",v(t));b=b.replace("h",t);b=b.replace("nn",v(w));b=b.replace("n",w);b=b.replace("ss",v(u));b=b.replace("s",u);b=b.replace("yy",h);b=b.replace("y",m);b=b.replace("mm",v(n));b=b.replace("m",n);b=b.replace("dd",v(r));b=b.replace("d",r);b=b.replace("DD","X1");b=b.replace("D","X2");b=b.replace("MM","X3");b=b.replace("M","X4");b=b.replace("X1",l[g.getDay()]);b=b.replace("X2",l[g.getDay()].substring(0,2));b=b.replace("X3",f[n-1]);b=b.replace("X4",f[n-1].substring(0,3))}g=c("<div></div>").addClass("publication-date").text(b)}else g=
c("<div></div>");k=c("<div></div>").addClass("summary").html(k);a=c('<div role="article"></div>').addClass("headline").append(a,g,k,"");0!=d.animation&&1!=d.animation&&6!=d.animation&&7!=d.animation||"rotate"!=d.mode||a.css({opacity:0});0==d.sortOrder?a.appendTo(e):a.prependTo(e)}function q(e,a){var b="#"+e.attr("id")+" .headline";if("default"==a.mode)e.css("overflow-y","auto"),c(b).css("position","relative"),c(b).css("height","auto"),c(b).css("top","0");else if("rotate"==a.mode){var g=0,k=0,d=0;
if(0==a.animation||1==a.animation||6==a.animation||7==a.animation)c(b).eq(g).css({opacity:1});else if(2==a.animation||3==a.animation)d="100%",3==a.animation&&(d="-100%"),c(b).css("left",d),c(b).eq(g).css("left",0);else if(4==a.animation||5==a.animation)c(b).eq(g).css("top",0),d="100%",5==a.animation&&(d="-100%");var f=c(b).length,l,h=!1,m={},n={},r=function(){h||(h=!0,l=!1,g=(k+1)%f,0==a.animation||1==a.animation?(m={opacity:0},n={opacity:1}):2==a.animation||3==a.animation?(m={left:"100%"==d?"-100%":
"100%"},n={left:0}):4==a.animation||5==a.animation?(m={top:"100%"==d?"-100%":"100%"},n={top:0}):6==a.animation?(m={opacity:0,scale:5},n={opacity:1,scale:1},c(b).eq(k).animate({scale:0},0)):7==a.animation&&(m={opacity:0,rotate:0,scale:0},n={opacity:1,rotate:1440,scale:1},c(b).eq(k).animate({rotate:0},0)),c(b).eq(k).animate(m,a.animationDuration,function(){2==a.animation||3==a.animation?c(this).css("left",d):4==a.animation||5==a.animation?c(this).css("top",d):6==a.animation&&c(this).animate({scale:0},
0)}),c(b).eq(g).animate(n,a.animationDuration,function(){h=!1;l||(l=setTimeout(r,a.pause))}),k=g)};l||(l=setTimeout(r,a.pause));e.hover(function(){clearTimeout(l);l=!1},function(){l||(l=setTimeout(r,250))})}else if("scroller"==a.mode)c(b).css("position","relative"),c(b).css("height","auto"),c(b).css("top","0"),a.line_count=e.height(),a.rotate=!0,e.hover(function(){a.rotate=!1},function(){a.rotate=!0}),z(e,a);else if("paginate"==a.mode){e.css("overflow-y","auto");c(b).css("position","relative");c(b).css("height",
"auto");c(b).css("top","0");var t=0,w=function(){e.find(".headline").hide().slice(t*a.numPerPage,(t+1)*a.numPerPage).show()},u=e.find(".headline").length;u=Math.ceil(u/a.numPerPage);for(var A=c('<div class="pager"></div>'),x=0;x<u;x++)c('<span class="page-number"></span>').text(x+1).bind("click",{newPage:x},function(C){t=C.data.newPage;w();c(this).addClass("active").siblings().removeClass("active")}).appendTo(A).addClass("clickable");A.prependTo(e).find("span.page-number:first").addClass("active");
w()}else"ticker"==a.mode?(c(b).css("position","relative"),c(b).css("height","auto"),c(b).css("top","0"),setTimeout(function(){B(e,a)},a.pause)):"marquee"==a.mode&&(c(b).css("position","relative"),c(b).css("height","auto"),c(b).css("top","0"),a.pause=!1,a.frameId=null,a.starttime=(new Date).getTime(),c(".headline",e).clone().appendTo(e),y(e,a),e.hover(function(){a.pause=!0;a.starttime=(new Date).getTime()-a.starttime;cancelAnimationFrame(a.frameId);a.frameId=null},function(){a.starttime=(new Date).getTime()-
a.starttime;a.pause=!1;y(e,a)}))}function z(e,a){var b=a.container.height();a.line_count+=a.rotate?-2:0;c("p",e).css("top",a.line_count);a.line_count<-b-20&&(a.line_count=e.height());setTimeout(function(){z(e,a)},a.speed)}function B(e,a){e.find(".headline:first").clone().appendTo(e).css("display","none");var b=e.find(".headline:first").outerHeight();c(".headline",e).animate({top:-b},a.animationDuration);c(":animated").promise().done(function(){e.find(".headline:first").remove();c(".headline",e).css({top:0});
e.find(".headline:last").fadeIn();setTimeout(function(){B(e,a)},a.pause)})}function y(e,a){var b=1==a.animation?"margin-right":"margin-left",g=e.find(".headline:first"),k=g.outerWidth().toFixed(2),d=e.outerWidth()/2;d=((new Date).getTime()-a.starttime)/a.animationDuration/(k/d);d=Math.min(d,1);marginLeft=-(k*d).toFixed(2);g.css(b,marginLeft);marginLeft<=-k&&(g.clone().appendTo(e).css("display","none").fadeIn(),g.remove(),c(".headline",e).css(b,"0px"),a.starttime=(new Date).getTime());a.pause||(a.frameId=requestAnimationFrame(function(){y(e,
a)}))}c.fn.newsviewer=function(e){var a=c.extend({animation:0,animationDuration:500,dataSource:"local",dateFormat:"yy/mm/dd",access_token:"",facebook_post_types:["status","photo","link"],includeDate:!0,maxItems:10,mode:"default",numPerPage:1,param:null,pause:5E3,sortOrder:0,speed:50,target:"_self",url:null},e);return this.each(function(){c.newsviewer(c(this),a)})};c.newsviewer=function(e,a){e.empty();"scroller"==a.mode&&c("<p></p>").css("position","relative").appendTo(e);a.container=e;"scroller"==
a.mode&&(a.container=c("p",e));if("local"==a.dataSource){if(null!=a.param)for(var b=0;b<a.param.length;b++)p(a.container,a.param[b][0],a.param[b][1],a.param[b][2],a.param[b][3],a);q(e,a)}else if("csv"==a.dataSource){var g=c("<img/>").attr({src:"wb.newsviewer.gif",alt:"Loading. Please wait."}).addClass("news-wait").appendTo(e);c.get(a.url,function(k){g.remove();for(var d=[""],f=[d],l=!1,h=0;h<k.length;h++){var m=k[h],n=k[h+1];if(l)'"'===m&&'"'===n?(d[d.length-1]+=m,h++):'"'===m?l=!1:d[d.length-1]+=
m;else{var r=0===d[d.length-1].length;'"'===m&&r?l=!0:","===m?d.push(""):"\r"===m&&"\n"===n?(d=[""],f.push(d),h++):"\n"===m||"\r"===m?(d=[""],f.push(d)):d[d.length-1]+=m}}k=Math.min(f.length,a.maxItems);for(d=0;d<k;d++)p(a.container,f[d][0],f[d][1],f[d][2],f[d][3],a);q(e,a)})}else"json"==a.dataSource?(g=c("<img/>").attr({src:"wb.newsviewer.gif",alt:"Loading. Please wait."}).addClass("news-wait").appendTo(e),c.getJSON(a.url,function(k){g.remove();c.each(k,function(d,f){p(a.container,f.link,f.title,
f.date,f.description,a)});q(e,a)})):"rss"==a.dataSource?(g=c("<img/>").attr({src:"wb.newsviewer.gif",alt:"Loading. Please wait."}).addClass("news-wait").appendTo(e),c.get(a.url,function(k){g.remove();1==c("feed",k).length?c("feed entry",k).each(function(d,f){if(d>=a.maxItems)return!1;p(a.container,c("link",this).text(),c("title",this).text(),c("updated",this).text(),c("content",this).text(),a)}):c("rss item",k).each(function(d,f){if(d>=a.maxItems)return!1;p(a.container,c("link",this).text(),c("title",
this).text(),c("pubDate",this).text(),c("description",this).text(),a)});q(e,a)})):"twitter"==a.dataSource?(g=c("<img/>").attr({src:"wb.newsviewer.gif",alt:"Loading. Please wait."}).addClass("news-wait").appendTo(e),c.getJSON(a.url,function(k){g.remove();c.each(k,function(d,f){var l=f.created_at.split(" ");l=Date.parse(l[1]+" "+l[2]+", "+l[5]+" "+l[3]);var h=f.text.replace(/((http|https):\/\/\S+)/g,'<a target="_blank" href="$1">$1</a>');h=h.replace(/@(\w+)/g,'<a target="_blank" href="http://twitter.com/$1">@$1</a>');
p(a.container,"http://twitter.com/"+a.param,h,l,"",a)});q(e,a)})):"twittersearch"==a.dataSource?(g=c("<img/>").attr({src:"wb.newsviewer.gif",alt:"Loading. Please wait."}).addClass("news-wait").appendTo(e),c.getJSON(a.url,function(k){g.remove();c.each(k.statuses,function(d,f){var l=f.created_at.split(" ");l=Date.parse(l[1]+" "+l[2]+", "+l[5]+" "+l[3]);var h=f.text.replace(/(http:\/\/\S+)/g,'<a target="_blank" href="$1">$1</a>');h=h.replace(/@(\w+)/g,'<a target="_blank" href="http://twitter.com/$1">@$1</a>');
p(a.container,"http://www.twitter.com/"+f.user.screen_name,'<img style="border-width:0;padding:0px 10px 10px 0px;float:left;" src="'+f.user.profile_image_url+'">'+h,l,"",a)});q(e,a)})):"facebook"==a.dataSource?(g=c("<img/>").attr({src:"wb.newsviewer.gif",alt:"Loading. Please wait."}).addClass("news-wait").appendTo(e),b="https://graph.facebook.com/"+a.param,b=b+"/feed?access_token="+a.access_token,b=b+"&limit="+a.maxItems,c.getJSON(b+"&fields=type,picture,message,link,story,created_time,from&callback=?",
function(k){g.remove();c.each(k.data,function(d,f){if(0<=c.inArray(f.type,a.facebook_post_types)){var l=new Date((f.created_time||"").replace(/-/g,"/").replace(/TZ/g," "));(new Date).getTime();l.getTime();var h="",m=a.param;null!=f.from&&(m=f.from.name);void 0!=f.message?h=f.message:void 0!=f.story&&(h=f.story);"link"==f.type&&-1==h.indexOf(f.link)&&(""!=h&&(h+="<br>"),h+=f.link);h=h.replace(/\b((http|https):\/\/\S+)/g,'<a target="_blank" href="$1">$1</a>');"photo"==f.type&&(h+='<div class="picture">',
void 0!=f.link&&(h=h+'<a href="'+f.link,h+='" target="_blank">'),h=h+'<img src="'+f.picture,h+='">',void 0!=f.link&&(h+="</a>"),h+="</div>");p(a.container,"http://www.facebook.com/profile.php?id="+a.param,m,l,h,a)}});q(e,a)})):"flickr"==a.dataSource?(g=c("<img/>").attr({src:"wb.newsviewer.gif",alt:"Loading. Please wait."}).addClass("news-wait").appendTo(e),b="http://api.flickr.com/services/feeds/photos_public.gne?format=json&",null!=a.param&&(b+=a.param,b+="&"),c.getJSON(b+"jsoncallback=?",function(k){g.remove();
c.each(k.items,function(d,f){var l=c("<a></a>").attr("href",f.link).attr("target",a.target).text(f.title);l=c('<div class="headline-title"></div>').append(l);var h=c("<div></div>").addClass("publication-date").text(f.author.split("(")[1].replace(")","")),m=c("<img>").attr("src",f.media.m);c("<div></div>").addClass("headline").append(l,h,m,"").appendTo(a.container);if(d==a.maxItems)return!1});q(e,a)})):"instagram"==a.dataSource&&(g=c("<img/>").attr({src:"wb.newsviewer.gif",alt:"Loading. Please wait."}).addClass("news-wait").appendTo(e),
b="https://api.instagram.com/v1/users/"+a.param,b=b+"/media/recent/?access_token="+a.access_token,b=b+"&count="+a.maxItems,c.ajax({url:b,crossDomain:!0,dataType:"jsonp"}).done(function(k){g.remove();c.each(k.data,function(d,f){var l=null==k.data[d].caption||void 0==k.data[d].caption?"":k.data[d].caption.text,h=Date(k.data[d].created_time),m=k.data[d].images.standard_resolution.url.replace(/\\/,"");p(a.container,m,'<img style="border-width:0;width:100%;height:auto;float:left;" src="'+m+'">'+l,h,"",
a)});q(e,a)}))}})(jQuery);